{"version":3,"sources":["images/spinner.svg","contexts/CurrentUserContext.js","utils/api.js","utils/utils.js","images/logo.svg","components/Header.js","components/Loader.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/FormInput.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeleteCardPopup.js","components/App.js","index.js"],"names":["CurrentUserContext","createContext","_id","name","about","avatar","spinner","api","options","this","_baseUrl","baseUrl","_headers","headers","url","method","body","fetchUrl","JSON","stringify","fetch","then","res","ok","error","Error","status","statusText","Promise","reject","json","_fetch","data","card","id","like","authorization","logError","console","message","Header","className","href","target","src","logo","alt","Part","step","speed","delay","color","size","halfSize","width","count","height","transform","x","y","rx","ry","fill","attributeName","values","keyTimes","dur","begin","repeatCount","Loader","props","preserveAspectRatio","rotateStep","delayStep","parts","i","j","push","buildParts","DeleteButton","onClickDelete","type","aria-label","onClick","LikeButton","onClickLike","isLiked","classes","Card","onCardClick","onCardLike","onCardDelete","useState","isLikeFetching","setIsLikeFetching","currentUserId","useContext","isOwner","owner","likes","some","user","link","length","Main","cardList","cards","onAddPlace","onEditAvatar","onEditProfile","loading","map","Footer","ImagePopup","onClose","popupClasses","PopupWithForm","title","isOpen","onSubmit","children","submitting","disabled","buttonText","buttonClasses","noValidate","FormInput","onChange","value","leave","setLeave","errorRef","useRef","inputRef","useEffect","current","validity","validationMessage","valid","textContent","ref","evt","onBlur","EditProfilePopup","onUpdateUser","open","currentUser","userName","setUserName","userAbout","setUserAbout","nameValid","setNameValid","aboutValid","setAboutValid","formValid","setFormValid","preventDefault","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","React","AddPlacePopup","setName","setLink","linkValid","setLinkValid","clearForm","placeholder","ConfirmDeleteCardPopup","cardId","onDeleteCard","App","setLoading","formSubmitting","setFormSubmitting","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","setCards","selectedCard","setSelectedCard","deletingCardId","setDeletingCardId","setCurrentUser","closeAllPopups","all","getUserInfo","getCardList","userData","catch","finally","Provider","setLikeFetching","newCard","state","c","updateProfile","newUserData","cardData","clearCallback","postCard","delete","filter","formData","updateAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1a866c74.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/spinner.c233b9e0.svg\";","import { createContext } from 'react';\nimport spinner from '../images/spinner.svg';\n\nconst CurrentUserContext = createContext({\n  _id: null,\n  name: 'Загрузка...',\n  about: '',\n  avatar: spinner,\n});\n\nexport default CurrentUserContext;\n","class Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _fetch(url, method = 'GET', body = null) {\n    const fetchUrl = `${this._baseUrl}/${url}`;\n    const options = {\n      method,\n      headers: this._headers,\n    };\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(fetchUrl, options).then((res) => {\n      if (!res.ok) {\n        const error = new Error(\n          `Error code ${res.status}. Message ${res.statusText}`\n        );\n        return Promise.reject(error);\n      }\n      return res.json();\n    });\n  }\n\n  getUserInfo() {\n    return this._fetch('users/me');\n  }\n\n  getCardList() {\n    return this._fetch('cards');\n  }\n\n  updateProfile(data) {\n    return this._fetch('users/me', 'PATCH', data);\n  }\n\n  postCard(card) {\n    return this._fetch('cards', 'POST', card);\n  }\n\n  delete(id) {\n    return this._fetch(`cards/${id}`, 'DELETE');\n  }\n\n  like(id, like = true) {\n    return this._fetch(`cards/likes/${id}`, like ? 'PUT' : 'DELETE');\n  }\n\n  updateAvatar(data) {\n    return this._fetch(`users/me/avatar`, 'PATCH', data);\n  }\n}\n\nexport const api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\n  headers: {\n    authorization: '52186c90-0ae5-45bb-99b5-e4acaa2b939f',\n    'Content-Type': 'application/json',\n  },\n});\n","export function logError(error) {\n  console.error(error.message);\n}\n","export default __webpack_public_path__ + \"static/media/logo.9efe1e8a.svg\";","import React from 'react';\nimport logo from '../images/logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header container\">\n      <a href=\"/\" className=\"logo\" target=\"_self\">\n        <img src={logo} alt=\"Mesto Russia\" className=\"logo__img\" />\n      </a>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport { number, string } from 'prop-types';\n\nPart.propTypes = {\n  step: number.isRequired,\n  speed: number.isRequired,\n  delay: number.isRequired,\n  color: string.isRequired,\n  size: number.isRequired,\n  count: number.isRequired,\n};\n\nLoader.propTypes = {\n  count: number,\n  speed: number,\n  color: string,\n  size: number,\n};\n\nfunction Part({ step, speed, delay, color, size, count }) {\n  const halfSize = size / 2;\n  const width = (size / count) * 0.7;\n  const height = halfSize * 0.6;\n\n  return (\n    <g transform={`rotate(${step} ${halfSize} ${halfSize})`}>\n      <rect\n        x={halfSize - width / 2}\n        y=\"0\"\n        rx=\"3\"\n        ry=\"7\"\n        width={width}\n        height={height}\n        fill={color}\n      >\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur={`${speed}ms`}\n          begin={`-${delay}ms`}\n          repeatCount=\"indefinite\"\n        />\n      </rect>\n    </g>\n  );\n}\n\nfunction Loader(props) {\n  const { count = 10, speed = 1000, color = '#ffffff', size = 100 } = props;\n\n  const buildParts = () => {\n    const rotateStep = 360 / count;\n    const delayStep = speed / count;\n    const parts = [];\n\n    for (let i = 0, j = speed; i < 360; i += rotateStep, j -= delayStep) {\n      parts.push(\n        <Part\n          key={i}\n          step={i}\n          delay={j}\n          speed={speed}\n          color={color}\n          size={size}\n          count={count}\n        />\n      );\n    }\n\n    return parts;\n  };\n\n  return (\n    <div className=\"loader\">\n      <svg\n        className=\"loader__svg\"\n        width={`${size}px`}\n        height={`${size}px`}\n        preserveAspectRatio=\"xMidYMid\"\n      >\n        {buildParts()}\n      </svg>\n    </div>\n  );\n}\n\nexport default Loader;\n","import React, { useContext, useState } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Loader from './Loader';\nimport { string, number, func, arrayOf, bool, shape } from 'prop-types';\n\nDeleteButton.propTypes = {\n  onClickDelete: func.isRequired,\n};\n\nLikeButton.propTypes = {\n  isLiked: bool,\n  count: number,\n  onClickLike: func.isRequired,\n};\n\nCard.propTypes = {\n  card: shape({\n    createdAt: string,\n    likes: arrayOf(\n      shape({\n        about: string,\n        avatar: string,\n        cohort: string,\n        name: string,\n        _id: string,\n      })\n    ),\n    link: string,\n    name: string,\n    owner: shape({\n      about: string,\n      avatar: string,\n      cohort: string,\n      name: string,\n      _id: string,\n    }),\n    _id: string,\n  }),\n  onCardClick: func.isRequired,\n  onCardLike: func.isRequired,\n  onCardDelete: func.isRequired,\n};\n\nfunction DeleteButton({ onClickDelete }) {\n  return (\n    <button\n      type=\"button\"\n      aria-label=\"Удалить\"\n      className=\"card__delete btn btn_type_delete\"\n      onClick={onClickDelete}\n    />\n  );\n}\n\nfunction LikeButton({ onClickLike, isLiked = false, count = 0 }) {\n  const classes = `btn btn_type_like ${isLiked && 'btn_type_like-active'}`;\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        aria-label=\"Нравится\"\n        className={classes}\n        onClick={onClickLike}\n      />\n      <span className=\"card__like-cnt\">{count}</span>\n    </>\n  );\n}\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const [isLikeFetching, setIsLikeFetching] = useState(false);\n  const { _id: currentUserId } = useContext(CurrentUserContext);\n\n  const isOwner = card.owner._id === currentUserId;\n  const isLiked = card.likes.some((user) => user._id === currentUserId);\n\n  const handleCardClick = () => {\n    onCardClick(card);\n  };\n\n  const handleLikeClick = () => {\n    onCardLike(card, setIsLikeFetching);\n  };\n\n  const handleDeleteClick = () => {\n    onCardDelete(card._id);\n  };\n\n  return (\n    <li className=\"cards__list-item\">\n      <article className=\"card\">\n        {isOwner && <DeleteButton onClickDelete={handleDeleteClick} />}\n        <img\n          src={card.link}\n          alt={card.name}\n          className=\"card__image\"\n          onClick={handleCardClick}\n        />\n        <div className=\"card__description\">\n          <h2 className=\"card__title\">{card.name}</h2>\n          <div className=\"card__like\">\n            {isLikeFetching ? (\n              <Loader size={30} color=\"black\" />\n            ) : (\n              <LikeButton\n                onClickLike={handleLikeClick}\n                isLiked={isLiked}\n                count={card.likes.length}\n              />\n            )}\n          </div>\n        </div>\n      </article>\n    </li>\n  );\n}\n\nexport default Card;\n","import React, { useContext } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Card from './Card';\nimport Loader from './Loader';\nimport { arrayOf, shape, func, bool, string } from 'prop-types';\n\nMain.propTypes = {\n  cards: arrayOf(\n    shape({\n      card: shape({\n        createdAt: string,\n        likes: arrayOf(\n          shape({\n            bout: string,\n            avatar: string,\n            cohort: string,\n            name: string,\n            _id: string,\n          })\n        ),\n        link: string,\n        name: string,\n        owner: shape({\n          about: string,\n          avatar: string,\n          cohort: string,\n          name: string,\n          _id: string,\n        }),\n        _id: string,\n      }),\n    })\n  ),\n  onCardLike: func.isRequired,\n  onCardDelete: func.isRequired,\n  onAddPlace: func.isRequired,\n  onEditAvatar: func.isRequired,\n  onEditProfile: func.isRequired,\n  onCardClick: func.isRequired,\n  loading: bool,\n};\n\nfunction Main(props) {\n  const { name, about, avatar } = useContext(CurrentUserContext);\n  const {\n    cards,\n    onCardLike,\n    onCardDelete,\n    onAddPlace,\n    onEditAvatar,\n    onEditProfile,\n    onCardClick,\n    loading = false,\n  } = props;\n\n  const buildCardList = (cardList) => {\n    return (\n      <ul className=\"cards__list\">\n        {cardList.map((card) => (\n          <Card\n            key={card._id}\n            card={card}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}\n            onCardClick={onCardClick}\n          />\n        ))}\n      </ul>\n    );\n  };\n\n  return (\n    <main className=\"content container\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar-wrapper\" onClick={onEditAvatar}>\n          <img src={avatar} alt=\"Аватар\" className=\"profile__avatar\" />\n        </div>\n        <div className=\"profile__details\">\n          <div className=\"profile__text\">\n            <h1 className=\"profile__name\">{name}</h1>\n            <button\n              type=\"button\"\n              aria-label=\"Редактировать профиль\"\n              className=\"btn btn_type_edit-profile\"\n              onClick={onEditProfile}\n            />\n          </div>\n          <p className=\"profile__about\">{about}</p>\n        </div>\n        <button\n          type=\"button\"\n          aria-label=\"Добавить новую карточку\"\n          className=\"btn btn_type_add-card\"\n          onClick={onAddPlace}\n        />\n      </section>\n\n      <section className=\"cards\">\n        {loading ? <Loader /> : buildCardList(cards)}\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer container\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport { arrayOf, func, shape, string } from 'prop-types';\n\nImagePopup.propTypes = {\n  onClose: func.isRequired,\n  card: shape({\n    createdAt: string,\n    likes: arrayOf(\n      shape({\n        bout: string,\n        avatar: string,\n        cohort: string,\n        name: string,\n        _id: string,\n      })\n    ),\n    link: string,\n    name: string,\n    owner: shape({\n      about: string,\n      avatar: string,\n      cohort: string,\n      name: string,\n      _id: string,\n    }),\n    _id: string,\n  }),\n};\n\nfunction ImagePopup({ card, onClose }) {\n  const popupClasses = `popup popup_type_image ${card ? 'popup_opened' : ''}`;\n\n  return (\n    <div className={popupClasses}>\n      <div className=\"popup__container popup__container_image\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"popup__close btn btn_type_close\"\n          onClick={onClose}\n        />\n        <img\n          src={card && card.link}\n          alt={card && card.name}\n          className=\"popup__image\"\n        />\n        <h2 className=\"popup__sign\">{card && card.name}</h2>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from 'react';\nimport Loader from './Loader';\nimport { string, func, bool, element } from 'prop-types';\n\nPopupWithForm.propTypes = {\n  title: string.isRequired,\n  name: string.isRequired,\n  isOpen: func.isRequired,\n  onClose: func.isRequired,\n  onSubmit: func.isRequired,\n  children: element.isRequired,\n  submitting: bool,\n  disabled: bool,\n  buttonText: string,\n};\n\nfunction PopupWithForm(props) {\n  const {\n    title,\n    name,\n    isOpen,\n    onClose,\n    onSubmit,\n    children,\n    submitting = false,\n    disabled = false,\n    buttonText = 'Сохранить',\n  } = props;\n  const popupClasses = `popup popup_type_${name} ${isOpen && 'popup_opened'}`;\n  const buttonClasses = `form__save ${disabled && 'form__save_disabled'}`;\n\n  return (\n    <div className={popupClasses}>\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"popup__close btn btn_type_close\"\n          onClick={onClose}\n        />\n        <h2 className=\"popup__title\">{title}</h2>\n        <form\n          name={`form-${name}`}\n          className={`form form_type_${name}`}\n          noValidate\n          onSubmit={onSubmit}\n        >\n          {children}\n          <button\n            type=\"submit\"\n            name=\"save\"\n            className={buttonClasses}\n            disabled={disabled}\n          >\n            {submitting ? (\n              <Loader size={30} count={15} speed={700} />\n            ) : (\n              buttonText\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { func, string } from 'prop-types';\n\nFormInput.propTypes = {\n  onChange: func.isRequired,\n  value: string.isRequired,\n};\n\nfunction FormInput({ onChange, value, ...props }) {\n  const [leave, setLeave] = useState(false);\n  const errorRef = useRef();\n  const inputRef = useRef();\n\n  const handleBlur = () => {\n    setLeave(true);\n  };\n\n  const handleChange = (evt) => {\n    const { value, validity } = evt.target;\n    onChange(value, validity.valid);\n  };\n\n  useEffect(() => {\n    if (leave) {\n      const { validity, validationMessage } = inputRef.current;\n\n      if (validity.valid) {\n        errorRef.current.textContent = '';\n      } else {\n        errorRef.current.textContent = validationMessage;\n      }\n    }\n  }, [value, leave]);\n\n  return (\n    <label className=\"form__field\">\n      <input\n        {...props}\n        ref={inputRef}\n        onChange={handleChange}\n        onBlur={handleBlur}\n      />\n      <span ref={errorRef} className=\"form__input-error name-input-error\" />\n    </label>\n  );\n}\n\nexport default FormInput;\n","import React, { useContext, useEffect, useState } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport FormInput from './FormInput';\nimport { func, bool } from 'prop-types';\n\nEditProfilePopup.propTypes = {\n  onClose: func.isRequired,\n  onUpdateUser: func.isRequired,\n  open: bool,\n  submitting: bool,\n};\n\nfunction EditProfilePopup({\n  onClose,\n  onUpdateUser,\n  open = false,\n  submitting = false,\n}) {\n  const currentUser = useContext(CurrentUserContext);\n  const [userName, setUserName] = useState(currentUser.name);\n  const [userAbout, setUserAbout] = useState(currentUser.about);\n  const [nameValid, setNameValid] = useState(true);\n  const [aboutValid, setAboutValid] = useState(true);\n  const [formValid, setFormValid] = useState(true);\n\n  const onChangeUserNameInput = (value, valid) => {\n    setNameValid(valid);\n    setUserName(value);\n  };\n\n  const onChangeUserAboutInput = (value, valid) => {\n    setAboutValid(valid);\n    setUserAbout(value);\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onUpdateUser({\n      name: userName,\n      about: userAbout,\n    });\n  };\n\n  useEffect(() => {\n    if (nameValid && aboutValid) {\n      setFormValid(true);\n    } else {\n      setFormValid(false);\n    }\n  }, [nameValid, aboutValid]);\n\n  useEffect(() => {\n    setUserName(currentUser.name);\n    setUserAbout(currentUser.about);\n\n    setNameValid(!!currentUser.name);\n    setAboutValid(!!currentUser.about);\n  }, [currentUser, open]);\n\n  return (\n    <PopupWithForm\n      title=\"Редактировать профиль\"\n      name=\"edit-profile\"\n      isOpen={open}\n      disabled={!formValid}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <FormInput\n        type=\"text\"\n        name=\"name\"\n        id=\"name-input\"\n        className=\"form__input form__input_type_name\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={userName}\n        onChange={onChangeUserNameInput}\n      />\n      <FormInput\n        type=\"text\"\n        name=\"about\"\n        id=\"about-input\"\n        className=\"form__input form__input_type_about\"\n        required\n        minLength=\"2\"\n        maxLength=\"200\"\n        value={userAbout}\n        onChange={onChangeUserAboutInput}\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { func, bool } from 'prop-types';\n\nEditAvatarPopup.propTypes = {\n  onClose: func.isRequired,\n  onUpdateAvatar: func.isRequired,\n  open: bool,\n  submitting: bool,\n};\n\nfunction EditAvatarPopup({\n  onClose,\n  onUpdateAvatar,\n  open = false,\n  submitting = false,\n}) {\n  const ref = React.useRef();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onUpdateAvatar({\n      avatar: ref.current.value,\n    });\n  };\n\n  return (\n    <PopupWithForm\n      title=\"Обновить аватар\"\n      name=\"update-profile\"\n      isOpen={open}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <label className=\"form__field\">\n        <input\n          ref={ref}\n          type=\"url\"\n          name=\"avatar\"\n          id=\"avatar-input\"\n          className=\"form__input form__input_type_link\"\n          required\n        />\n        <span className=\"form__input-error avatar-input-error\" />\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React, { useEffect, useState } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport FormInput from './FormInput';\nimport { func, bool } from 'prop-types';\n\nAddPlacePopup.propTypes = {\n  onClose: func.isRequired,\n  onAddPlace: func.isRequired,\n  open: bool,\n  submitting: bool,\n};\n\nfunction AddPlacePopup({\n  onClose,\n  onAddPlace,\n  submitting = false,\n  open = false,\n}) {\n  const [name, setName] = useState('');\n  const [link, setLink] = useState('');\n  const [nameValid, setNameValid] = useState(false);\n  const [linkValid, setLinkValid] = useState(false);\n  const [formValid, setFormValid] = useState(false);\n\n  const handleClose = () => {\n    setNameValid(false);\n    setLinkValid(false);\n    setName('');\n    setLink('');\n    onClose();\n  };\n\n  const handleChangeNameInput = (value, valid) => {\n    setNameValid(valid);\n    setName(value);\n  };\n\n  const handleChangeLinkInput = (value, valid) => {\n    setLinkValid(valid);\n    setLink(value);\n  };\n\n  const clearForm = () => {\n    setName('');\n    setLink('');\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onAddPlace({ name, link }, clearForm);\n  };\n\n  useEffect(() => {\n    if (nameValid && linkValid) {\n      setFormValid(true);\n    } else {\n      setFormValid(false);\n    }\n  }, [nameValid, linkValid]);\n\n  return (\n    <PopupWithForm\n      title=\"Новое место\"\n      name=\"add-card\"\n      isOpen={open}\n      disabled={!formValid}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <FormInput\n        value={name}\n        onChange={handleChangeNameInput}\n        type=\"text\"\n        name=\"name\"\n        id=\"place-input\"\n        placeholder=\"Название\"\n        className=\"form__input form__input_type_card-name\"\n        required\n        minLength=\"2\"\n        maxLength=\"30\"\n      />\n      <FormInput\n        value={link}\n        onChange={handleChangeLinkInput}\n        type=\"url\"\n        name=\"link\"\n        id=\"link-input\"\n        placeholder=\"Ссылка на картинку\"\n        className=\"form__input form__input_type_link\"\n        required\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { string, func, bool } from 'prop-types';\n\nConfirmDeleteCardPopup.propTypes = {\n  cardId: string.isRequired,\n  onClose: func.isRequired,\n  onDeleteCard: func.isRequired,\n  submitting: bool,\n};\n\nfunction ConfirmDeleteCardPopup({\n  cardId,\n  onClose,\n  onDeleteCard,\n  submitting = false,\n}) {\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onDeleteCard(cardId);\n  };\n\n  return (\n    <PopupWithForm\n      title=\"Вы уверены?\"\n      buttonText=\"Да\"\n      name=\"delete\"\n      isOpen={!!cardId}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <input\n        type=\"hidden\"\n        className=\"form__input form__input_type_id\"\n        name=\"id\"\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default ConfirmDeleteCardPopup;\n","import React, { useState, useEffect, useContext } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport { api } from '../utils/api';\nimport { logError } from '../utils/utils';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeleteCardPopup from './ConfirmDeleteCardPopup';\n\nfunction App() {\n  const [loading, setLoading] = useState(true);\n  const [formSubmitting, setFormSubmitting] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [cards, setCards] = useState([]);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [deletingCardId, setDeletingCardId] = useState(null);\n  const [currentUser, setCurrentUser] = useState(\n    useContext(CurrentUserContext)\n  );\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleDeleteCardClick = (id) => {\n    setDeletingCardId(id);\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  };\n\n  const handleUpdateUser = (userData) => {\n    setFormSubmitting(true);\n    api\n      .updateProfile(userData)\n      .then((newUserData) => {\n        setCurrentUser(newUserData);\n        setIsEditProfilePopupOpen(false);\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleUpdateAvatar = (formData) => {\n    setFormSubmitting(true);\n    api\n      .updateAvatar(formData)\n      .then((newUserData) => {\n        setCurrentUser(newUserData);\n        setIsEditAvatarPopupOpen(false);\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleAddPlaceSubmit = (cardData, clearCallback) => {\n    setFormSubmitting(true);\n    api\n      .postCard(cardData)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        setIsAddPlacePopupOpen(false);\n        clearCallback();\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleDeleteCardSubmit = (id) => {\n    setFormSubmitting(true);\n    api\n      .delete(id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== id));\n        setDeletingCardId(null);\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleCardLike = (card, setLikeFetching) => {\n    const isLiked = card.likes.some((user) => user._id === currentUser._id);\n\n    setLikeFetching(true);\n    api\n      .like(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch(logError)\n      .finally(() => setLikeFetching(false));\n  };\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setDeletingCardId(null);\n    setSelectedCard(null);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n\n    Promise.all([api.getUserInfo(), api.getCardList()])\n      .then(([userData, cardList]) => {\n        setCurrentUser(userData);\n        setCards(cardList);\n      })\n      .catch(logError)\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleDeleteCardClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          loading={loading}\n        />\n        <Footer />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n        <EditProfilePopup\n          open={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          submitting={formSubmitting}\n        />\n        <AddPlacePopup\n          open={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          submitting={formSubmitting}\n        />\n        <ConfirmDeleteCardPopup\n          cardId={deletingCardId}\n          onClose={closeAllPopups}\n          onDeleteCard={handleDeleteCardSubmit}\n          submitting={formSubmitting}\n        />\n        <EditAvatarPopup\n          open={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          submitting={formSubmitting}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}