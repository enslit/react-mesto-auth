{"version":3,"sources":["assets/icons/spinner.svg","contexts/CurrentUserContext.js","assets/images/logo.svg","assets/icons/menu.svg","assets/icons/close_icon.svg","components/Header.js","components/FormInput.js","components/Loader.js","components/Login.js","utils/api.js","utils/utils.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ConfirmDeleteCardPopup.js","components/EditAvatarPopup.js","components/MainContainer.js","components/Register.js","hoc/ProtectedRoute.js","assets/icons/success-icon.svg","assets/icons/fail-icon.svg","components/PopupRegisterInfo.js","components/App.js","index.js"],"names":["CurrentUserContext","createContext","_id","email","name","about","avatar","spinner","UserInfo","openMenu","setOpenMenu","history","useHistory","useContext","setIsloggedIn","currentUser","setCurrentUser","className","onClick","localStorage","removeItem","push","type","aria-label","style","backgroundImage","closeIcon","menuIcon","HeaderLink","isLoginPage","path","to","Header","useState","isLoggedIn","pathname","useLocation","href","target","src","logo","alt","FormInput","onChange","value","props","leave","setLeave","errorRef","useRef","inputRef","useEffect","current","validity","validationMessage","valid","textContent","ref","evt","inputValue","inputName","onBlur","Part","step","speed","delay","color","size","halfSize","width","count","height","transform","x","y","rx","ry","fill","attributeName","values","keyTimes","dur","begin","repeatCount","Loader","preserveAspectRatio","rotateStep","delayStep","parts","i","j","buildParts","Login","onSubmit","fetching","password","form","setForm","handleInput","noValidate","preventDefault","placeholder","id","required","minLength","maxLength","FetchApi","options","this","_baseUrl","baseUrl","_headers","headers","url","method","body","additionalHeaders","fetchUrl","Object","assign","JSON","stringify","fetch","then","res","ok","json","AuthApi","_fetch","token","Authorization","api","data","card","like","authorization","auth","logError","error","console","message","DeleteButton","onClickDelete","LikeButton","onClickLike","isLiked","classes","Card","onCardClick","onCardLike","onCardDelete","isLikeFetching","setIsLikeFetching","userId","isOwner","owner","likes","some","user","link","length","Main","cardList","cards","onAddPlace","onEditAvatar","onEditProfile","loading","map","Footer","ImagePopup","onClose","popupClasses","PopupWithForm","title","isOpen","children","submitting","disabled","buttonText","buttonClasses","EditProfilePopup","onUpdateUser","open","defaultFormState","useMemo","formValid","setFormValid","AddPlacePopup","clearForm","ConfirmDeleteCardPopup","cardId","onDeleteCard","EditAvatarPopup","onUpdateAvatar","React","MainContainer","setLoading","formSubmitting","setFormSubmitting","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","setCards","selectedCard","setSelectedCard","deletingCardId","setDeletingCardId","closeAllPopups","log","Promise","all","getUserInfo","getCardList","userData","catch","finally","setLikeFetching","newCard","state","c","updateProfile","newUserData","cardData","clearCallback","postCard","delete","filter","formData","updateAvatar","Register","ProtectedRoute","Component","component","isloggedIn","PopupRegisterInfo","success","successIcon","failIcon","App","showRegisterInfo","setShowRegisterInfo","setFetching","status","authStatus","setAuthStatus","appReady","setAppReady","changeAuthStatus","jwt","getItem","checkToken","Provider","setItem","reject","toString","register","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mQAAe,MAA0B,oCCW1BA,EARYC,wBAAc,CACvCC,IAAK,KACLC,MAAO,GACPC,KAAM,sDACNC,MAAO,GACPC,OAAQC,I,OCRK,MAA0B,iCCA1B,MAA0B,iCCA1B,MAA0B,uC,OCmBzC,SAASC,EAAT,GAA8C,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,YACtBC,EAAUC,cAD2B,EAEYC,qBACrDb,GADMc,EAFmC,EAEnCA,cAAeC,EAFoB,EAEpBA,YAAaC,EAFO,EAEPA,eAkBpC,OACE,qCACE,sBAAKC,UAAS,uBAAkBR,EAAW,uBAAyB,IAApE,UACE,sBAAMQ,UAAU,gBAAhB,SAAiCF,EAAYZ,QAC7C,wBAAQe,QAlBC,WACbC,aAAaC,WAAW,OACxBV,GAAY,GACZI,GAAc,GACdE,EAAe,CACbd,IAAK,KACLC,MAAO,GACPC,KAAM,sDACNC,MAAO,GACPC,OAAQC,IAEVI,EAAQU,KAAK,aAOgBJ,UAAU,oBAAnC,+CAIF,wBACEC,QAAS,kBAAMR,GAAaD,IAC5Ba,KAAK,SACLC,aAAW,2BACXN,UAAU,oBACVO,MAAO,CAAEC,gBAAgB,OAAD,OAAShB,EAAWiB,EAAYC,SAMhE,SAASC,EAAT,GAA+B,IACvBC,EAAuB,aADD,EAARC,KAGpB,OACE,cAAC,IAAD,CACEC,GAAIF,EAAc,WAAa,WAC/BZ,UAAU,oBAFZ,SAIGY,EAAc,qEAAgB,mCA0BtBG,MArBf,WAAmB,IAAD,EACgBC,oBAAS,GADzB,mBACTxB,EADS,KACCC,EADD,KAERwB,EAAerB,qBAAWb,GAA1BkC,WACAC,EAAaC,cAAbD,SAER,OACE,yBACElB,UAAS,2BAAsBR,EAAW,qBAAuB,IADnE,UAGE,mBAAG4B,KAAK,IAAIpB,UAAU,OAAOqB,OAAO,QAApC,SACE,qBAAKC,IAAKC,EAAMC,IAAI,eAAexB,UAAU,gBAE9CiB,EACC,cAAC1B,EAAD,CAAUC,SAAUA,EAAUC,YAAaA,IAE3C,cAACkB,EAAD,CAAYE,KAAMK,Q,eCtCXO,MAxCf,YAAmD,IAA9BC,EAA6B,EAA7BA,SAAUC,EAAmB,EAAnBA,MAAUC,EAAS,sCACtBZ,oBAAS,GADa,mBACzCa,EADyC,KAClCC,EADkC,KAE1CC,EAAWC,mBACXC,EAAWD,mBAuBjB,OAZAE,qBAAU,WACR,GAAIL,EAAO,CAAC,IAAD,EAC+BI,EAASE,QAAzCC,EADC,EACDA,SAAUC,EADT,EACSA,kBAEdD,EAASE,MACXP,EAASI,QAAQI,YAAc,GAE/BR,EAASI,QAAQI,YAAcF,KAGlC,CAACV,EAAOE,IAGT,wBAAO7B,UAAU,cAAjB,UACE,iDACM4B,GADN,IAEED,MAAOA,EACPa,IAAKP,EACLP,SAvBe,SAACe,GAAS,IAAD,EAC6BA,EAAIpB,OAA9CqB,EADa,EACpBf,MAAyBgB,EADL,EACDxD,KAAiBiD,EADhB,EACgBA,SAC5CV,EAASgB,EAAYC,EAAWP,EAASE,QAsBrCM,OA5Ba,WACjBd,GAAS,OA6BP,sBAAMU,IAAKT,EAAU/B,UAAU,2C,MCxBrC,SAAS6C,EAAT,GAA2D,IAA3CC,EAA0C,EAA1CA,KAAMC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,KACnCC,EAAWD,EAAO,EAClBE,EAASF,EAFyC,EAATG,MAEhB,GACzBC,EAAoB,GAAXH,EAEf,OACE,mBAAGI,UAAS,iBAAYT,EAAZ,YAAoBK,EAApB,YAAgCA,EAAhC,KAAZ,SACE,sBACEK,EAAGL,EAAWC,EAAQ,EACtBK,EAAE,IACFC,GAAG,IACHC,GAAG,IACHP,MAAOA,EACPE,OAAQA,EACRM,KAAMX,EAPR,SASE,yBACEY,cAAc,UACdC,OAAO,MACPC,SAAS,MACTC,IAAG,UAAKjB,EAAL,MACHkB,MAAK,WAAMjB,EAAN,MACLkB,YAAY,mBA8CPC,MAvCf,SAAgBvC,GAAQ,IAAD,EAC+CA,EAA5DyB,aADa,MACL,GADK,IAC+CzB,EAAhDmB,aADC,MACO,IADP,IAC+CnB,EAAlCqB,aADb,MACqB,UADrB,IAC+CrB,EAAfsB,YADhC,MACuC,IADvC,EAyBrB,OACE,qBAAKlD,UAAU,SAAf,SACE,qBACEA,UAAU,cACVoD,MAAK,UAAKF,EAAL,MACLI,OAAM,UAAKJ,EAAL,MACNkB,oBAAoB,WAJtB,SAxBe,WAKjB,IAJA,IAAMC,EAAa,IAAMhB,EACnBiB,EAAYvB,EAAQM,EACpBkB,EAAQ,GAELC,EAAI,EAAGC,EAAI1B,EAAOyB,EAAI,IAAKA,GAAKH,EAAYI,GAAKH,EACxDC,EAAMnE,KACJ,cAACyC,EAAD,CAEEC,KAAM0B,EACNxB,MAAOyB,EACP1B,MAAOA,EACPE,MAAOA,EACPC,KAAMA,EACNG,MAAOA,GANFmB,IAWX,OAAOD,EAWFG,QCFMC,MApEf,YAAwC,IAAvBC,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,SAAY,EACb7D,mBAAS,CAC/B9B,MAAO,GACP4F,SAAU,KAHyB,mBAC9BC,EAD8B,KACxBC,EADwB,KAM/BC,EAAc,SAACtD,EAAOxC,GAC1B6F,EAAQ,2BACHD,GADE,kBAEJ5F,EAAOwC,MAUZ,OACE,sBAAM3B,UAAU,UAAhB,SACE,uBACEkF,YAAU,EACV/F,KAAK,UACLa,UAAU,sBACV4E,SAZe,SAACnC,GACpBA,EAAI0C,iBAEJP,EAASG,IAKP,UAME,sBAAK/E,UAAU,aAAf,UACE,oBAAIA,UAAU,cAAd,sCACA,cAAC,EAAD,CACEK,KAAK,QACLlB,KAAK,QACLiG,YAAY,QACZC,GAAG,iBACHrF,UAAU,4DACVsF,UAAQ,EACRC,UAAU,IACVC,UAAU,KACV9D,SAAUuD,EACVtD,MAAOoD,EAAK7F,QAEd,cAAC,EAAD,CACEmB,KAAK,WACLlB,KAAK,WACLiG,YAAY,uCACZC,GAAG,iBACHrF,UAAU,+DACVsF,UAAQ,EACRC,UAAU,IACVC,UAAU,KACV9D,SAAUuD,EACVtD,MAAOoD,EAAKD,cAGhB,qBAAK9E,UAAU,gBAAf,SACE,wBACEK,KAAK,SACLlB,KAAK,OACLa,UAAU,mCAHZ,SAKG6E,EAAW,cAAC,EAAD,CAAQ3B,KAAM,GAAID,MAAM,SAAY,2C,wCCvEtDwC,E,WACJ,WAAYC,GAAU,oBACpBC,KAAKC,SAAWF,EAAQG,QACxBF,KAAKG,SAAWJ,EAAQK,Q,0CAG1B,SAAOC,GAA2D,IAAtDC,EAAqD,uDAA5C,MAAOC,EAAqC,uDAA9B,KAAMC,EAAwB,uDAAJ,GACrDC,EAAQ,UAAMT,KAAKC,SAAX,YAAuBI,GAC/BN,EAAU,CACdO,SACAF,QAASM,OAAOC,OAAOX,KAAKG,SAAUK,IAOxC,OAJID,IACFR,EAAQQ,KAAOK,KAAKC,UAAUN,IAGzBO,MAAML,EAAUV,GAASgB,MAAK,SAACC,GAKpC,OAJKA,EAAIC,GAIFD,EAAIE,c,KAKXC,E,8JACJ,SAAS5H,EAAO4F,GACd,OAAOa,KAAKoB,OAAO,SAAU,OAAQ,CAAE7H,QAAO4F,e,kBAGhD,SAAK5F,EAAO4F,GACV,OAAOa,KAAKoB,OAAO,SAAU,OAAQ,CAAE7H,QAAO4F,e,wBAGhD,SAAWkC,GACT,IAAMb,EAAoB,CACxBc,cAAc,UAAD,OAAYD,IAG3B,OAAOrB,KAAKoB,OAAO,WAAY,MAAO,KAAMZ,O,GAd1BV,GAgDTyB,EAAM,I,iKA7BjB,WACE,OAAOvB,KAAKoB,OAAO,c,yBAGrB,WACE,OAAOpB,KAAKoB,OAAO,W,2BAGrB,SAAcI,GACZ,OAAOxB,KAAKoB,OAAO,WAAY,QAASI,K,sBAG1C,SAASC,GACP,OAAOzB,KAAKoB,OAAO,QAAS,OAAQK,K,oBAGtC,SAAO/B,GACL,OAAOM,KAAKoB,OAAL,gBAAqB1B,GAAM,Y,kBAGpC,SAAKA,GAAkB,IAAdgC,IAAa,yDACpB,OAAO1B,KAAKoB,OAAL,sBAA2B1B,GAAMgC,EAAO,MAAQ,Y,0BAGzD,SAAaF,GACX,OAAOxB,KAAKoB,OAAL,kBAA+B,QAASI,O,GA1B9B1B,GA8BF,CAAW,CAC5BI,QAAS,8CACTE,QAAS,CACPuB,cAAe,uCACf,eAAgB,sBAIPC,EAAO,IAAIT,EAAQ,CAC9BjB,QAAS,gCACTE,QAAS,CACP,eAAgB,sBCtFb,SAASyB,EAASC,GACvBC,QAAQD,MAAMA,EAAME,SC0CtB,SAASC,EAAT,GAA0C,IAAlBC,EAAiB,EAAjBA,cACtB,OACE,wBACExH,KAAK,SACLC,aAAW,6CACXN,UAAU,mCACVC,QAAS4H,IAKf,SAASC,EAAT,GAAkE,IAA5CC,EAA2C,EAA3CA,YAA2C,IAA9BC,eAA8B,aAAb3E,aAAa,MAAL,EAAK,EACzD4E,EAAO,4BAAwBD,GAAW,wBAEhD,OACE,qCACE,wBACE3H,KAAK,SACLC,aAAW,mDACXN,UAAWiI,EACXhI,QAAS8H,IAEX,sBAAM/H,UAAU,iBAAhB,SAAkCqD,OAsDzB6E,MAjDf,YAAgE,IAAhDd,EAA+C,EAA/CA,KAAMe,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aAAgB,EACjBrH,oBAAS,GADQ,mBACtDsH,EADsD,KACtCC,EADsC,KAGhDC,EADW5I,qBAAWb,GAA3Be,YACAb,IAEFwJ,EAAUrB,EAAKsB,MAAMzJ,MAAQuJ,EAC7BR,EAAUZ,EAAKuB,MAAMC,MAAK,SAACC,GAAD,OAAUA,EAAK5J,MAAQuJ,KAcvD,OACE,oBAAIxI,UAAU,mBAAd,SACE,0BAASA,UAAU,OAAnB,UACGyI,GAAW,cAACb,EAAD,CAAcC,cAPN,WACxBQ,EAAajB,EAAKnI,QAOd,qBACEqC,IAAK8F,EAAK0B,KACVtH,IAAK4F,EAAKjI,KACVa,UAAU,cACVC,QApBgB,WACtBkI,EAAYf,MAqBR,sBAAKpH,UAAU,oBAAf,UACE,oBAAIA,UAAU,cAAd,SAA6BoH,EAAKjI,OAClC,qBAAKa,UAAU,aAAf,SACGsI,EACC,cAAC,EAAD,CAAQpF,KAAM,GAAID,MAAM,UAExB,cAAC6E,EAAD,CACEC,YAzBU,WACtBK,EAAWhB,EAAMmB,IAyBLP,QAASA,EACT3E,MAAO+D,EAAKuB,MAAMI,oBCJnBC,MA/Df,SAAcpH,GAAQ,IAcGqH,EAbfnJ,EAAgBF,qBAAWb,GAA3Be,YACAX,EAAwBW,EAAxBX,KAAMC,EAAkBU,EAAlBV,MAAOC,EAAWS,EAAXT,OAEnB6J,EAQEtH,EARFsH,MACAd,EAOExG,EAPFwG,WACAC,EAMEzG,EANFyG,aACAc,EAKEvH,EALFuH,WACAC,EAIExH,EAJFwH,aACAC,EAGEzH,EAHFyH,cACAlB,EAEEvG,EAFFuG,YAViB,EAYfvG,EADF0H,eAXiB,SA8BnB,OACE,uBAAMtJ,UAAU,oBAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,qBAAKA,UAAU,0BAA0BC,QAASmJ,EAAlD,SACE,qBAAK9H,IAAKjC,EAAQmC,IAAI,uCAASxB,UAAU,sBAE3C,sBAAKA,UAAU,mBAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,gBAAd,SAA+Bb,IAC/B,wBACEkB,KAAK,SACLC,aAAW,4HACXN,UAAU,4BACVC,QAASoJ,OAGb,mBAAGrJ,UAAU,iBAAb,SAA+BZ,OAEjC,wBACEiB,KAAK,SACLC,aAAW,mIACXN,UAAU,wBACVC,QAASkJ,OAIb,yBAASnJ,UAAU,QAAnB,SACGsJ,EAAU,cAAC,EAAD,KA3CML,EA2CqBC,EAzCxC,oBAAIlJ,UAAU,cAAd,SACGiJ,EAASM,KAAI,SAACnC,GAAD,OACZ,cAAC,EAAD,CAEEA,KAAMA,EACNgB,WAAYA,EACZC,aAAcA,EACdF,YAAaA,GAJRf,EAAKnI,iBCnDPuK,MARf,WACE,OACE,wBAAQxJ,UAAU,mBAAlB,SACE,mBAAGA,UAAU,oBAAb,uCC+CSyJ,MAvBf,YAAwC,IAAlBrC,EAAiB,EAAjBA,KAAMsC,EAAW,EAAXA,QACpBC,EAAY,iCAA6BvC,EAAO,eAAiB,IAEvE,OACE,qBAAKpH,UAAW2J,EAAhB,SACE,sBAAK3J,UAAU,0CAAf,UACE,wBACEK,KAAK,SACLC,aAAW,6CACXN,UAAU,kCACVC,QAASyJ,IAEX,qBACEpI,IAAK8F,GAAQA,EAAK0B,KAClBtH,IAAK4F,GAAQA,EAAKjI,KAClBa,UAAU,iBAEZ,oBAAIA,UAAU,cAAd,SAA6BoH,GAAQA,EAAKjI,aCsBnCyK,MApDf,SAAuBhI,GAAQ,IAE3BiI,EASEjI,EATFiI,MACA1K,EAQEyC,EARFzC,KACA2K,EAOElI,EAPFkI,OACAJ,EAME9H,EANF8H,QACA9E,EAKEhD,EALFgD,SACAmF,EAIEnI,EAJFmI,SAP0B,EAWxBnI,EAHFoI,kBAR0B,WAWxBpI,EAFFqI,gBAT0B,WAWxBrI,EADFsI,kBAV0B,MAUb,yDAVa,EAYtBP,EAAY,2BAAuBxK,EAAvB,YAA+B2K,GAAU,gBACrDK,EAAa,4CACjBF,GAAY,uBAGd,OACE,qBAAKjK,UAAW2J,EAAhB,SACE,sBAAK3J,UAAU,mBAAf,UACE,wBACEK,KAAK,SACLC,aAAW,6CACXN,UAAU,kCACVC,QAASyJ,IAEX,oBAAI1J,UAAU,eAAd,SAA8B6J,IAC9B,uBACE1K,KAAI,eAAUA,GACda,UAAS,yBAAoBb,GAC7B+F,YAAU,EACVN,SAAUA,EAJZ,UAMGmF,EACD,wBACE1J,KAAK,SACLlB,KAAK,OACLa,UAAWmK,EACXF,SAAUA,EAJZ,SAMGD,EACC,cAAC,EAAD,CAAQ9G,KAAM,GAAIG,MAAO,GAAIN,MAAO,MAEpCmH,aCyCCE,MAvFf,YAKI,IAJFV,EAIC,EAJDA,QACAW,EAGC,EAHDA,aAGC,IAFDC,YAEC,aADDN,kBACC,SACOlK,EAAgBF,qBAAWb,GAA3Be,YACFyK,EAAmBC,mBACvB,iBAAO,CACLrL,KAAM,CACJwC,MAAO7B,EAAYX,KACnBmD,OAAO,GAETlD,MAAO,CACLuC,MAAO7B,EAAYV,MACnBkD,OAAO,MAGX,CAACxC,IAbF,EAeuBkB,mBAASuJ,GAfhC,mBAeMxF,EAfN,KAeYC,EAfZ,OAgBiChE,oBAAS,GAhB1C,mBAgBMyJ,EAhBN,KAgBiBC,EAhBjB,KAkBKzF,EAAc,SAACtD,EAAOxC,EAAMmD,GAChC0C,EAAQ,2BACHD,GADE,kBAEJ5F,EAAO,CAAEwC,QAAOW,aAyBrB,OAZAJ,qBAAU,WACJ6C,EAAK5F,KAAKmD,OAASyC,EAAK3F,MAAMkD,MAChCoI,GAAa,GAEbA,GAAa,KAEd,CAAC3F,IAEJ7C,qBAAU,WACR8C,EAAQuF,KACP,CAACzK,EAAawK,EAAMtF,EAASuF,IAG9B,eAAC,EAAD,CACEV,MAAM,4HACN1K,KAAK,eACL2K,OAAQQ,EACRL,UAAWQ,EACXf,QAASA,EACT9E,SA5BiB,SAACnC,GACpBA,EAAI0C,iBAEJkF,EAAa,CACXlL,KAAM4F,EAAK5F,KAAKwC,MAChBvC,MAAO2F,EAAK3F,MAAMuC,SAwBlBqI,WAAYA,EAPd,UASE,cAAC,EAAD,CACE3J,KAAK,OACLlB,KAAK,OACLkG,GAAG,aACHrF,UAAU,4DACVsF,UAAQ,EACRC,UAAU,IACVC,UAAU,KACV7D,MAAOoD,EAAK5F,KAAKwC,MACjBD,SAAUuD,IAEZ,cAAC,EAAD,CACE5E,KAAK,OACLlB,KAAK,QACLkG,GAAG,cACHrF,UAAU,6DACVsF,UAAQ,EACRC,UAAU,IACVC,UAAU,MACV7D,MAAOoD,EAAK3F,MAAMuC,MAClBD,SAAUuD,QCGH0F,MArFf,YAKI,IAJFjB,EAIC,EAJDA,QACAP,EAGC,EAHDA,WAGC,IAFDa,kBAEC,aADDM,YACC,SACKC,EAAmB,CACvBpL,KAAM,CACJwC,MAAO,GACPW,OAAO,GAETwG,KAAM,CACJnH,MAAO,GACPW,OAAO,IARV,EAWuBtB,mBAASuJ,GAXhC,mBAWMxF,EAXN,KAWYC,EAXZ,OAYiChE,oBAAS,GAZ1C,mBAYMyJ,EAZN,KAYiBC,EAZjB,KAmBKzF,EAAc,SAACtD,EAAOxC,EAAMmD,GAChC0C,EAAQ,2BACHD,GADE,kBAEJ5F,EAAO,CAAEwC,QAAOW,aAIfsI,EAAY,WAChB5F,EAAQuF,IAiBV,OARArI,qBAAU,WACJ6C,EAAK5F,KAAKmD,OAASyC,EAAK+D,KAAKxG,MAC/BoI,GAAa,GAEbA,GAAa,KAEd,CAAC3F,IAGF,eAAC,EAAD,CACE8E,MAAM,gEACN1K,KAAK,WACL2K,OAAQQ,EACRL,UAAWQ,EACXf,QApCgB,WAClB1E,EAAQuF,GACRb,KAmCE9E,SArBiB,SAACnC,GACpBA,EAAI0C,iBADwB,IAEpBhG,EAAe4F,EAAf5F,KAAM2J,EAAS/D,EAAT+D,KACdK,EAAW,CAAEhK,KAAMA,EAAKwC,MAAOmH,KAAMA,EAAKnH,OAASiJ,IAmBjDZ,WAAYA,EAPd,UASE,cAAC,EAAD,CACErI,MAAOoD,EAAK5F,KAAKwC,MACjBD,SAAUuD,EACV5E,KAAK,OACLlB,KAAK,OACLkG,GAAG,cACHD,YAAY,mDACZpF,UAAU,iEACVsF,UAAQ,EACRC,UAAU,IACVC,UAAU,OAEZ,cAAC,EAAD,CACE7D,MAAOoD,EAAK+D,KAAKnH,MACjBD,SAAUuD,EACV5E,KAAK,MACLlB,KAAK,OACLkG,GAAG,aACHD,YAAY,qGACZpF,UAAU,4DACVsF,UAAQ,QClDDuF,MA9Bf,YAKI,IAJFC,EAIC,EAJDA,OACApB,EAGC,EAHDA,QACAqB,EAEC,EAFDA,aAEC,IADDf,kBACC,SAMD,OACE,cAAC,EAAD,CACEH,MAAM,2DACNK,WAAW,eACX/K,KAAK,SACL2K,SAAUgB,EACVpB,QAASA,EACT9E,SAZiB,SAACnC,GACpBA,EAAI0C,iBACJ4F,EAAaD,IAWXd,WAAYA,EAPd,SASE,uBACE3J,KAAK,SACLL,UAAU,kCACVb,KAAK,UCgBE6L,MAxCf,YAKI,IAJFtB,EAIC,EAJDA,QACAuB,EAGC,EAHDA,eAGC,IAFDX,YAEC,aADDN,kBACC,SACKxH,EAAM0I,IAAMlJ,SAUlB,OACE,cAAC,EAAD,CACE6H,MAAM,wFACN1K,KAAK,iBACL2K,OAAQQ,EACRZ,QAASA,EACT9E,SAdiB,SAACnC,GACpBA,EAAI0C,iBAEJ8F,EAAe,CACb5L,OAAQmD,EAAIL,QAAQR,SAWpBqI,WAAYA,EANd,SAQE,wBAAOhK,UAAU,cAAjB,UACE,uBACEwC,IAAKA,EACLnC,KAAK,MACLlB,KAAK,SACLkG,GAAG,eACHrF,UAAU,4DACVsF,UAAQ,IAEV,sBAAMtF,UAAU,+C,MCyITmL,MAzKf,WAA0B,IAAD,EACOnK,oBAAS,GADhB,mBAChBsI,EADgB,KACP8B,EADO,OAEqBpK,oBAAS,GAF9B,mBAEhBqK,EAFgB,KAEAC,EAFA,OAGmCtK,oBAAS,GAH5C,mBAGhBuK,EAHgB,KAGOC,EAHP,OAIqCxK,oBAAS,GAJ9C,mBAIhByK,EAJgB,KAIQC,EAJR,OAK+B1K,oBAAS,GALxC,mBAKhB2K,EALgB,KAKKC,EALL,OAMG5K,mBAAS,IANZ,mBAMhBkI,EANgB,KAMT2C,EANS,OAOiB7K,mBAAS,MAP1B,mBAOhB8K,EAPgB,KAOFC,EAPE,OAQqB/K,mBAAS,MAR9B,mBAQhBgL,EARgB,KAQAC,EARA,OASiBrM,qBAAWb,GAA3Ce,EATe,EASfA,YAAaC,EATE,EASFA,eA4FfmM,EAAiB,WACrBV,GAAyB,GACzBE,GAA0B,GAC1BE,GAAuB,GACvBK,EAAkB,MAClBF,EAAgB,OAqBlB,OAlBA7J,qBAAU,WACRkJ,GAAW,GACX1D,QAAQyE,IAAIrM,GAEZsM,QAAQC,IAAI,CAACnF,EAAIoF,cAAepF,EAAIqF,gBACjC7F,MAAK,YAA2B,IAAD,mBAAxB8F,EAAwB,KAAdvD,EAAc,KAC9BlJ,EAAe,2BACVD,GACA0M,IAELX,EAAS5C,MAEVwD,MAAMjF,GACNkF,SAAQ,WACPtB,GAAW,QAEd,IAGD,qCACE,cAAC,EAAD,CACElC,MAAOA,EACPd,WA7CiB,SAAChB,EAAMuF,GAC5B,IAAM3E,EAAUZ,EAAKuB,MAAMC,MAAK,SAACC,GAAD,OAAUA,EAAK5J,MAAQa,EAAYb,OAEnE0N,GAAgB,GAChBzF,EACGG,KAAKD,EAAKnI,KAAM+I,GAChBtB,MAAK,SAACkG,GACLf,GAAS,SAACgB,GAAD,OACPA,EAAMtD,KAAI,SAACuD,GAAD,OAAQA,EAAE7N,MAAQmI,EAAKnI,IAAM2N,EAAUE,WAGpDL,MAAMjF,GACNkF,SAAQ,kBAAMC,GAAgB,OAkC7BtE,aA7GwB,SAAChD,GAC7B4G,EAAkB5G,IA6GdgE,cAtHyB,WAC7BqC,GAA0B,IAsHtBvC,WAnHsB,WAC1ByC,GAAuB,IAmHnBxC,aA5HwB,WAC5BoC,GAAyB,IA4HrBrD,YA7GkB,SAACf,GACvB2E,EAAgB3E,IA6GZkC,QAASA,IAEX,cAAC,EAAD,IACA,cAAC,EAAD,CAAYlC,KAAM0E,EAAcpC,QAASwC,IACzC,cAAC,EAAD,CACE5B,KAAMmB,EACN/B,QAASwC,EACT7B,aAjHmB,SAACmC,GACxBlB,GAAkB,GAClBpE,EACG6F,cAAcP,GACd9F,MAAK,SAACsG,GACLjN,EAAe,2BACVD,GACAkN,IAELtB,GAA0B,MAE3Be,MAAMjF,GACNkF,SAAQ,kBAAMpB,GAAkB,OAsG/BtB,WAAYqB,IAEd,cAAC,EAAD,CACEf,KAAMqB,EACNjC,QAASwC,EACT/C,WAzFuB,SAAC8D,EAAUC,GACtC5B,GAAkB,GAClBpE,EACGiG,SAASF,GACTvG,MAAK,SAACkG,GACLf,EAAS,CAACe,GAAF,mBAAc1D,KACtB0C,GAAuB,GACvBsB,OAEDT,MAAMjF,GACNkF,SAAQ,kBAAMpB,GAAkB,OAgF/BtB,WAAYqB,IAEd,cAAC,EAAD,CACEP,OAAQkB,EACRtC,QAASwC,EACTnB,aAlFyB,SAAC1F,GAC9BiG,GAAkB,GAClBpE,EACGkG,OAAO/H,GACPqB,MAAK,WACJmF,GAAS,SAACgB,GAAD,OAAWA,EAAMQ,QAAO,SAACP,GAAD,OAAOA,EAAE7N,MAAQoG,QAClD4G,EAAkB,SAEnBQ,MAAMjF,GACNkF,SAAQ,kBAAMpB,GAAkB,OA0E/BtB,WAAYqB,IAEd,cAAC,EAAD,CACEf,KAAMiB,EACN7B,QAASwC,EACTjB,eApHqB,SAACqC,GAC1BhC,GAAkB,GAClBpE,EACGqG,aAAaD,GACb5G,MAAK,SAACsG,GACLjN,EAAe,2BACVD,GACAkN,IAELxB,GAAyB,MAE1BiB,MAAMjF,GACNkF,SAAQ,kBAAMpB,GAAkB,OAyG/BtB,WAAYqB,QCtFLmC,MA9Ef,YAA2C,IAAvB5I,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,SAAY,EAChB7D,mBAAS,CAC/B9B,MAAO,GACP4F,SAAU,KAH4B,mBACjCC,EADiC,KAC3BC,EAD2B,KAMlCC,EAAc,SAACtD,EAAOxC,GAC1B6F,EAAQ,2BACHD,GADE,kBAEJ5F,EAAOwC,MAUZ,OACE,sBAAM3B,UAAU,UAAhB,SACE,uBACEkF,YAAU,EACV/F,KAAK,UACLa,UAAU,sBACV4E,SAZe,SAACnC,GACpBA,EAAI0C,iBAEJP,EAASG,IAKP,UAME,sBAAK/E,UAAU,aAAf,UACE,oBAAIA,UAAU,cAAd,gFACA,cAAC,EAAD,CACEK,KAAK,QACLlB,KAAK,QACLiG,YAAY,QACZC,GAAG,iBACHrF,UAAU,4DACVsF,UAAQ,EACRC,UAAU,IACVC,UAAU,KACV9D,SAAUuD,EACVtD,MAAOoD,EAAK7F,QAEd,cAAC,EAAD,CACEmB,KAAK,WACLlB,KAAK,WACLiG,YAAY,uCACZC,GAAG,iBACHrF,UAAU,+DACVsF,UAAQ,EACRC,UAAU,IACVC,UAAU,KACV9D,SAAUuD,EACVtD,MAAOoD,EAAKD,cAGhB,sBAAK9E,UAAU,gBAAf,UACE,wBACEK,KAAK,SACLlB,KAAK,OACLa,UAAU,mCAHZ,SAKG6E,EACC,cAAC,EAAD,CAAQ3B,KAAM,GAAID,MAAM,SAExB,iHAGJ,sBAAKjD,UAAU,mBAAf,iIACwB,IACtB,cAAC,IAAD,CAAMc,GAAG,WAAWd,UAAU,kBAA9B,wDC9DGyN,MARf,YAA+E,IAA1CC,EAAyC,EAApDC,UAAsBC,EAA8B,EAA9BA,WAAY/M,EAAkB,EAAlBA,KAASe,EAAS,iDAC5E,OACE,cAAC,IAAD,CAAOf,KAAMA,EAAb,SACI+M,EAA0C,cAACF,EAAD,eAAe9L,IAA5C,cAAC,IAAD,CAAUd,GAAG,gBCbnB,MAA0B,yCCA1B,MAA0B,sCCmC1B+M,MAvBf,YAA+D,IAAlCvD,EAAiC,EAAjCA,KAAMZ,EAA2B,EAA3BA,QAASoE,EAAkB,EAAlBA,QAASjE,EAAS,EAATA,MACnD,OACE,qBAAK7J,UAAS,gBAAWsK,EAAO,eAAiB,IAAjD,SACE,sBAAKtK,UAAU,mBAAf,UACE,wBACEK,KAAK,SACLC,aAAW,6CACXN,UAAU,kCACVC,QAASyJ,IAEX,qBACE1J,UAAU,cACVM,aAAYwN,EAAU,sHAAyB,0GAC/CvN,MAAO,CACLC,gBAAgB,OAAD,OAASsN,EAAUC,EAAcC,EAAjC,QAGnB,oBAAIhO,UAAU,2CAAd,SAA0D6J,UC4HnDoE,MA5If,WACE,IAAMvO,EAAUC,cADH,EAEyBqB,mBACpCpB,qBAAWb,IAHA,mBAENe,EAFM,KAEOC,EAFP,OAKmCiB,oBAAS,GAL5C,mBAKNkN,EALM,KAKYC,EALZ,OAMmBnN,oBAAS,GAN5B,mBAMN6D,EANM,KAMIuJ,EANJ,OAOuBpN,mBAAS,CAAEqN,QAAQ,EAAO1G,QAAS,KAP1D,mBAON2G,EAPM,KAOMC,EAPN,OAQuBvN,oBAAS,GARhC,mBAQNC,EARM,KAQMpB,EARN,OASmBmB,oBAAS,GAT5B,mBASNwN,EATM,KASIC,EATJ,KAiFPC,EAAmB,SAAC,GAAc,IAC9BxP,EAD6B,EAAXiI,KAClBjI,MACRa,EAAe,2BAAKD,GAAN,IAAmBZ,WACjCW,GAAc,GACdH,EAAQU,KAAK,MAiBf,OAdA8B,qBAAU,WACR,IAAMyM,EAAMzO,aAAa0O,QAAQ,OAE7BD,EACFpH,EACGsH,WAAWF,GACXjI,KAAKgI,GACLjC,MAAMjF,GACNkF,SAAQ,kBAAM+B,GAAY,MAE7BA,GAAY,KAEb,IAEED,EASH,cAAC,EAAmBM,SAApB,CACEnN,MAAO,CAAE7B,cAAaC,iBAAgBkB,aAAYpB,iBADpD,SAGE,sBAAKG,UAAU,OAAf,UACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOa,KAAK,WAAZ,SACE,cAAC,EAAD,CAAO+D,SApES,SAAC,GAAyB,IAAvB1F,EAAsB,EAAtBA,MAAO4F,EAAe,EAAfA,SAClCsJ,GAAY,GACZ7G,EACGA,KAAKrI,EAAO4F,GACZ4B,MAAK,YAAyB,IAAtBM,EAAqB,EAArBA,MAAOW,EAAc,EAAdA,QACd,OAAKX,GAIL9G,aAAa6O,QAAQ,MAAO/H,GACrBO,EAAKsH,WAAW7H,IAJdoF,QAAQ4C,OAAOrH,MAMzBjB,KAAKgI,GACLjC,OAAM,SAAChF,GACN8G,EAAc,CACZF,QAAQ,EACR1G,QACEF,EAAMwH,YAAc,wMAExBd,GAAoB,GACpB3G,EAASC,MAEViF,SAAQ,WACP0B,GAAY,OA6C4BvJ,SAAUA,MAEhD,cAAC,IAAD,CAAOhE,KAAK,WAAZ,SACE,cAAC,EAAD,CAAU+D,SA9GS,SAAC,GAAyB,IAAvB1F,EAAsB,EAAtBA,MAAO4F,EAAe,EAAfA,SACrCsJ,GAAY,GACZ7G,EACG2H,SAAShQ,EAAO4F,GAChB4B,MAAK,YAAsB,IAAnBS,EAAkB,EAAlBA,KAAMM,EAAY,EAAZA,MACb,OAAIA,EACK2E,QAAQ4C,OAAOvH,IAGxB1H,EAAe,2BAAKD,GAAN,IAAmBZ,MAAOiI,EAAKjI,MAAOD,IAAKkI,EAAKlI,OACvDsI,EAAKA,KAAKrI,EAAO4F,OAEzB4B,MAAK,YAAuB,IAApBM,EAAmB,EAAnBA,MAAOS,EAAY,EAAZA,MACd,GAAIA,EACF,OAAO2E,QAAQ4C,OAAOvH,GAGxBvH,aAAa6O,QAAQ,MAAO/H,GAC5BnH,GAAc,GACdH,EAAQU,KAAK,KACbmO,EAAc,CACZF,QAAQ,EACR1G,QAAS,6KAGZ8E,OAAM,SAAChF,GACN8G,EAAc,CACZF,QAAQ,EACR1G,QACEF,EAAMwH,YAAc,wMAExBzH,EAASC,MAEViF,SAAQ,WACPyB,GAAoB,GACpBC,GAAY,OA2EkCvJ,SAAUA,MAEtD,cAAC,EAAD,CACEhE,KAAK,IACL8M,UAAWxC,EACXyC,WAAY3M,OAGhB,cAAC,EAAD,CACEqJ,KAAM4D,EACNrE,MAAOyE,EAAW3G,QAClBmG,QAASQ,EAAWD,OACpB3E,QAxDiB,WACvByE,GAAoB,WA0BlB,qBAAKnO,UAAU,oBAAf,SACE,cAAC,EAAD,CAAQkD,KAAM,IAAKG,MAAO,QChHlC8L,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJC,SAASC,eAAe,W","file":"static/js/main.d0490339.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/spinner.c233b9e0.svg\";","import { createContext } from 'react';\nimport spinner from '../assets/icons/spinner.svg';\n\nconst CurrentUserContext = createContext({\n  _id: null,\n  email: '',\n  name: 'Загрузка...',\n  about: '',\n  avatar: spinner,\n});\n\nexport default CurrentUserContext;\n","export default __webpack_public_path__ + \"static/media/logo.9efe1e8a.svg\";","export default __webpack_public_path__ + \"static/media/menu.a46d5c1c.svg\";","export default __webpack_public_path__ + \"static/media/close_icon.a004a2d5.svg\";","import React, { useContext, useState } from 'react';\nimport { Link, useLocation, useHistory } from 'react-router-dom';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport { bool, func, object, string } from 'prop-types';\nimport logo from '../assets/images/logo.svg';\nimport menuIcon from '../assets/icons/menu.svg';\nimport closeIcon from '../assets/icons/close_icon.svg';\nimport spinner from '../assets/icons/spinner.svg';\n\nUserInfo.propTypes = {\n  user: object,\n  openMenu: bool,\n  setOpenMenu: func,\n};\n\nHeaderLink.propTypes = {\n  path: string,\n};\n\nfunction UserInfo({ openMenu, setOpenMenu }) {\n  const history = useHistory();\n  const { setIsloggedIn, currentUser, setCurrentUser } = useContext(\n    CurrentUserContext\n  );\n\n  const logout = () => {\n    localStorage.removeItem('jwt');\n    setOpenMenu(false);\n    setIsloggedIn(false);\n    setCurrentUser({\n      _id: null,\n      email: '',\n      name: 'Загрузка...',\n      about: '',\n      avatar: spinner,\n    });\n    history.push('/sign-in');\n  };\n\n  return (\n    <>\n      <div className={`header__menu ${openMenu ? 'header__menu_visible' : ''}`}>\n        <span className=\"header__email\">{currentUser.email}</span>\n        <button onClick={logout} className=\"link header__link\">\n          Выйти\n        </button>\n      </div>\n      <button\n        onClick={() => setOpenMenu(!openMenu)}\n        type=\"button\"\n        aria-label=\"Меню\"\n        className=\"btn btn_type_menu\"\n        style={{ backgroundImage: `url(${openMenu ? closeIcon : menuIcon}` }}\n      />\n    </>\n  );\n}\n\nfunction HeaderLink({ path }) {\n  const isLoginPage = path === '/sign-in';\n\n  return (\n    <Link\n      to={isLoginPage ? '/sign-up' : '/sign-in'}\n      className=\"link header__link\"\n    >\n      {isLoginPage ? 'Регистрация' : 'Войти'}\n    </Link>\n  );\n}\n\nfunction Header() {\n  const [openMenu, setOpenMenu] = useState(false);\n  const { isLoggedIn } = useContext(CurrentUserContext);\n  const { pathname } = useLocation();\n\n  return (\n    <header\n      className={`header container ${openMenu ? 'header_menu-opened' : ''}`}\n    >\n      <a href=\"/\" className=\"logo\" target=\"_self\">\n        <img src={logo} alt=\"Mesto Russia\" className=\"logo__img\" />\n      </a>\n      {isLoggedIn ? (\n        <UserInfo openMenu={openMenu} setOpenMenu={setOpenMenu} />\n      ) : (\n        <HeaderLink path={pathname} />\n      )}\n    </header>\n  );\n}\n\nexport default Header;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { func, string } from 'prop-types';\n\nFormInput.propTypes = {\n  onChange: func.isRequired,\n  value: string.isRequired,\n};\n\nfunction FormInput({ onChange, value, ...props }) {\n  const [leave, setLeave] = useState(false);\n  const errorRef = useRef();\n  const inputRef = useRef();\n\n  const handleBlur = () => {\n    setLeave(true);\n  };\n\n  const handleChange = (evt) => {\n    const { value: inputValue, name: inputName, validity } = evt.target;\n    onChange(inputValue, inputName, validity.valid);\n  };\n\n  useEffect(() => {\n    if (leave) {\n      const { validity, validationMessage } = inputRef.current;\n\n      if (validity.valid) {\n        errorRef.current.textContent = '';\n      } else {\n        errorRef.current.textContent = validationMessage;\n      }\n    }\n  }, [value, leave]);\n\n  return (\n    <label className=\"form__field\">\n      <input\n        {...props}\n        value={value}\n        ref={inputRef}\n        onChange={handleChange}\n        onBlur={handleBlur}\n      />\n      <span ref={errorRef} className=\"form__input-error name-input-error\" />\n    </label>\n  );\n}\n\nexport default FormInput;\n","import React from 'react';\nimport { number, string } from 'prop-types';\n\nPart.propTypes = {\n  step: number.isRequired,\n  speed: number.isRequired,\n  delay: number.isRequired,\n  color: string.isRequired,\n  size: number.isRequired,\n  count: number.isRequired,\n};\n\nLoader.propTypes = {\n  count: number,\n  speed: number,\n  color: string,\n  size: number,\n};\n\nfunction Part({ step, speed, delay, color, size, count }) {\n  const halfSize = size / 2;\n  const width = (size / count) * 0.7;\n  const height = halfSize * 0.6;\n\n  return (\n    <g transform={`rotate(${step} ${halfSize} ${halfSize})`}>\n      <rect\n        x={halfSize - width / 2}\n        y=\"0\"\n        rx=\"3\"\n        ry=\"7\"\n        width={width}\n        height={height}\n        fill={color}\n      >\n        <animate\n          attributeName=\"opacity\"\n          values=\"1;0\"\n          keyTimes=\"0;1\"\n          dur={`${speed}ms`}\n          begin={`-${delay}ms`}\n          repeatCount=\"indefinite\"\n        />\n      </rect>\n    </g>\n  );\n}\n\nfunction Loader(props) {\n  const { count = 10, speed = 1000, color = '#ffffff', size = 100 } = props;\n\n  const buildParts = () => {\n    const rotateStep = 360 / count;\n    const delayStep = speed / count;\n    const parts = [];\n\n    for (let i = 0, j = speed; i < 360; i += rotateStep, j -= delayStep) {\n      parts.push(\n        <Part\n          key={i}\n          step={i}\n          delay={j}\n          speed={speed}\n          color={color}\n          size={size}\n          count={count}\n        />\n      );\n    }\n\n    return parts;\n  };\n\n  return (\n    <div className=\"loader\">\n      <svg\n        className=\"loader__svg\"\n        width={`${size}px`}\n        height={`${size}px`}\n        preserveAspectRatio=\"xMidYMid\"\n      >\n        {buildParts()}\n      </svg>\n    </div>\n  );\n}\n\nexport default Loader;\n","import React, { useState } from 'react';\nimport { func, bool } from 'prop-types';\nimport FormInput from './FormInput';\nimport './styles/auth.css';\nimport Loader from './Loader';\n\nLogin.propTypes = {\n  onSubmit: func,\n  fetching: bool,\n};\n\nfunction Login({ onSubmit, fetching }) {\n  const [form, setForm] = useState({\n    email: '',\n    password: '',\n  });\n\n  const handleInput = (value, name) => {\n    setForm({\n      ...form,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onSubmit(form);\n  };\n\n  return (\n    <main className=\"content\">\n      <form\n        noValidate\n        name=\"sign-up\"\n        className=\"form form_type_auth\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"form__body\">\n          <h1 className=\"form__title\">Вход</h1>\n          <FormInput\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            id=\"username-input\"\n            className=\"form__input form__input_type_email form__input_style_dark\"\n            required\n            minLength=\"2\"\n            maxLength=\"40\"\n            onChange={handleInput}\n            value={form.email}\n          />\n          <FormInput\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Пароль\"\n            id=\"password-input\"\n            className=\"form__input form__input_type_password form__input_style_dark\"\n            required\n            minLength=\"6\"\n            maxLength=\"40\"\n            onChange={handleInput}\n            value={form.password}\n          />\n        </div>\n        <div className=\"form__actions\">\n          <button\n            type=\"submit\"\n            name=\"save\"\n            className=\"form__save form__save_style_dark\"\n          >\n            {fetching ? <Loader size={30} color=\"#000\" /> : 'Войти'}\n          </button>\n        </div>\n      </form>\n    </main>\n  );\n}\n\nexport default Login;\n","class FetchApi {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _fetch(url, method = 'GET', body = null, additionalHeaders = {}) {\n    const fetchUrl = `${this._baseUrl}/${url}`;\n    const options = {\n      method,\n      headers: Object.assign(this._headers, additionalHeaders),\n    };\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(fetchUrl, options).then((res) => {\n      if (!res.ok) {\n        // const error = new Error(`Error code ${res.status}. ${res.statusText}`);\n        // return Promise.reject(error);\n      }\n      return res.json();\n    });\n  }\n}\n\nclass AuthApi extends FetchApi {\n  register(email, password) {\n    return this._fetch('signup', 'POST', { email, password });\n  }\n\n  auth(email, password) {\n    return this._fetch('signin', 'POST', { email, password });\n  }\n\n  checkToken(token) {\n    const additionalHeaders = {\n      Authorization: `Bearer ${token}`,\n    };\n\n    return this._fetch('users/me', 'GET', null, additionalHeaders);\n  }\n}\n\nclass AppApi extends FetchApi {\n  getUserInfo() {\n    return this._fetch('users/me');\n  }\n\n  getCardList() {\n    return this._fetch('cards');\n  }\n\n  updateProfile(data) {\n    return this._fetch('users/me', 'PATCH', data);\n  }\n\n  postCard(card) {\n    return this._fetch('cards', 'POST', card);\n  }\n\n  delete(id) {\n    return this._fetch(`cards/${id}`, 'DELETE');\n  }\n\n  like(id, like = true) {\n    return this._fetch(`cards/likes/${id}`, like ? 'PUT' : 'DELETE');\n  }\n\n  updateAvatar(data) {\n    return this._fetch(`users/me/avatar`, 'PATCH', data);\n  }\n}\n\nexport const api = new AppApi({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\n  headers: {\n    authorization: '52186c90-0ae5-45bb-99b5-e4acaa2b939f',\n    'Content-Type': 'application/json',\n  },\n});\n\nexport const auth = new AuthApi({\n  baseUrl: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n","export function logError(error) {\n  console.error(error.message);\n}\n","import React, { useContext, useState } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Loader from './Loader';\nimport { string, number, func, arrayOf, bool, shape } from 'prop-types';\n\nDeleteButton.propTypes = {\n  onClickDelete: func.isRequired,\n};\n\nLikeButton.propTypes = {\n  isLiked: bool,\n  count: number,\n  onClickLike: func.isRequired,\n};\n\nCard.propTypes = {\n  card: shape({\n    createdAt: string,\n    likes: arrayOf(\n      shape({\n        about: string,\n        avatar: string,\n        cohort: string,\n        name: string,\n        _id: string,\n      })\n    ),\n    link: string,\n    name: string,\n    owner: shape({\n      about: string,\n      avatar: string,\n      cohort: string,\n      name: string,\n      _id: string,\n    }),\n    _id: string,\n  }),\n  onCardClick: func.isRequired,\n  onCardLike: func.isRequired,\n  onCardDelete: func.isRequired,\n};\n\nfunction DeleteButton({ onClickDelete }) {\n  return (\n    <button\n      type=\"button\"\n      aria-label=\"Удалить\"\n      className=\"card__delete btn btn_type_delete\"\n      onClick={onClickDelete}\n    />\n  );\n}\n\nfunction LikeButton({ onClickLike, isLiked = false, count = 0 }) {\n  const classes = `btn btn_type_like ${isLiked && 'btn_type_like-active'}`;\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        aria-label=\"Нравится\"\n        className={classes}\n        onClick={onClickLike}\n      />\n      <span className=\"card__like-cnt\">{count}</span>\n    </>\n  );\n}\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const [isLikeFetching, setIsLikeFetching] = useState(false);\n  const { currentUser } = useContext(CurrentUserContext);\n  const { _id: userId } = currentUser;\n\n  const isOwner = card.owner._id === userId;\n  const isLiked = card.likes.some((user) => user._id === userId);\n\n  const handleCardClick = () => {\n    onCardClick(card);\n  };\n\n  const handleLikeClick = () => {\n    onCardLike(card, setIsLikeFetching);\n  };\n\n  const handleDeleteClick = () => {\n    onCardDelete(card._id);\n  };\n\n  return (\n    <li className=\"cards__list-item\">\n      <article className=\"card\">\n        {isOwner && <DeleteButton onClickDelete={handleDeleteClick} />}\n        <img\n          src={card.link}\n          alt={card.name}\n          className=\"card__image\"\n          onClick={handleCardClick}\n        />\n        <div className=\"card__description\">\n          <h2 className=\"card__title\">{card.name}</h2>\n          <div className=\"card__like\">\n            {isLikeFetching ? (\n              <Loader size={30} color=\"black\" />\n            ) : (\n              <LikeButton\n                onClickLike={handleLikeClick}\n                isLiked={isLiked}\n                count={card.likes.length}\n              />\n            )}\n          </div>\n        </div>\n      </article>\n    </li>\n  );\n}\n\nexport default Card;\n","import React, { useContext } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Card from './Card';\nimport Loader from './Loader';\nimport { arrayOf, shape, func, bool, string } from 'prop-types';\n\nMain.propTypes = {\n  cards: arrayOf(\n    shape({\n      card: shape({\n        createdAt: string,\n        likes: arrayOf(\n          shape({\n            bout: string,\n            avatar: string,\n            cohort: string,\n            name: string,\n            _id: string,\n          })\n        ),\n        link: string,\n        name: string,\n        owner: shape({\n          about: string,\n          avatar: string,\n          cohort: string,\n          name: string,\n          _id: string,\n        }),\n        _id: string,\n      }),\n    })\n  ),\n  onCardLike: func.isRequired,\n  onCardDelete: func.isRequired,\n  onAddPlace: func.isRequired,\n  onEditAvatar: func.isRequired,\n  onEditProfile: func.isRequired,\n  onCardClick: func.isRequired,\n  loading: bool,\n};\n\nfunction Main(props) {\n  const { currentUser } = useContext(CurrentUserContext);\n  const { name, about, avatar } = currentUser;\n  const {\n    cards,\n    onCardLike,\n    onCardDelete,\n    onAddPlace,\n    onEditAvatar,\n    onEditProfile,\n    onCardClick,\n    loading = false,\n  } = props;\n\n  const buildCardList = (cardList) => {\n    return (\n      <ul className=\"cards__list\">\n        {cardList.map((card) => (\n          <Card\n            key={card._id}\n            card={card}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}\n            onCardClick={onCardClick}\n          />\n        ))}\n      </ul>\n    );\n  };\n\n  return (\n    <main className=\"content container\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar-wrapper\" onClick={onEditAvatar}>\n          <img src={avatar} alt=\"Аватар\" className=\"profile__avatar\" />\n        </div>\n        <div className=\"profile__details\">\n          <div className=\"profile__text\">\n            <h1 className=\"profile__name\">{name}</h1>\n            <button\n              type=\"button\"\n              aria-label=\"Редактировать профиль\"\n              className=\"btn btn_type_edit-profile\"\n              onClick={onEditProfile}\n            />\n          </div>\n          <p className=\"profile__about\">{about}</p>\n        </div>\n        <button\n          type=\"button\"\n          aria-label=\"Добавить новую карточку\"\n          className=\"btn btn_type_add-card\"\n          onClick={onAddPlace}\n        />\n      </section>\n\n      <section className=\"cards\">\n        {loading ? <Loader /> : buildCardList(cards)}\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer container\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport { arrayOf, func, shape, string } from 'prop-types';\n\nImagePopup.propTypes = {\n  onClose: func.isRequired,\n  card: shape({\n    createdAt: string,\n    likes: arrayOf(\n      shape({\n        bout: string,\n        avatar: string,\n        cohort: string,\n        name: string,\n        _id: string,\n      })\n    ),\n    link: string,\n    name: string,\n    owner: shape({\n      about: string,\n      avatar: string,\n      cohort: string,\n      name: string,\n      _id: string,\n    }),\n    _id: string,\n  }),\n};\n\nfunction ImagePopup({ card, onClose }) {\n  const popupClasses = `popup popup_type_image ${card ? 'popup_opened' : ''}`;\n\n  return (\n    <div className={popupClasses}>\n      <div className=\"popup__container popup__container_image\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"popup__close btn btn_type_close\"\n          onClick={onClose}\n        />\n        <img\n          src={card && card.link}\n          alt={card && card.name}\n          className=\"popup__image\"\n        />\n        <h2 className=\"popup__sign\">{card && card.name}</h2>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from 'react';\nimport Loader from './Loader';\nimport { string, func, bool, node } from 'prop-types';\n\nPopupWithForm.propTypes = {\n  title: string.isRequired,\n  name: string.isRequired,\n  isOpen: bool.isRequired,\n  onClose: func.isRequired,\n  onSubmit: func.isRequired,\n  children: node.isRequired,\n  submitting: bool,\n  disabled: bool,\n  buttonText: string,\n};\n\nfunction PopupWithForm(props) {\n  const {\n    title,\n    name,\n    isOpen,\n    onClose,\n    onSubmit,\n    children,\n    submitting = false,\n    disabled = false,\n    buttonText = 'Сохранить',\n  } = props;\n  const popupClasses = `popup popup_type_${name} ${isOpen && 'popup_opened'}`;\n  const buttonClasses = `form__save form__save_style_light ${\n    disabled && 'form__save_disabled'\n  }`;\n\n  return (\n    <div className={popupClasses}>\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"popup__close btn btn_type_close\"\n          onClick={onClose}\n        />\n        <h2 className=\"popup__title\">{title}</h2>\n        <form\n          name={`form-${name}`}\n          className={`form form_type_${name}`}\n          noValidate\n          onSubmit={onSubmit}\n        >\n          {children}\n          <button\n            type=\"submit\"\n            name=\"save\"\n            className={buttonClasses}\n            disabled={disabled}\n          >\n            {submitting ? (\n              <Loader size={30} count={15} speed={700} />\n            ) : (\n              buttonText\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React, { useContext, useEffect, useMemo, useState } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport FormInput from './FormInput';\nimport { func, bool } from 'prop-types';\n\nEditProfilePopup.propTypes = {\n  onClose: func.isRequired,\n  onUpdateUser: func.isRequired,\n  open: bool,\n  submitting: bool,\n};\n\nfunction EditProfilePopup({\n  onClose,\n  onUpdateUser,\n  open = false,\n  submitting = false,\n}) {\n  const { currentUser } = useContext(CurrentUserContext);\n  const defaultFormState = useMemo(\n    () => ({\n      name: {\n        value: currentUser.name,\n        valid: true,\n      },\n      about: {\n        value: currentUser.about,\n        valid: true,\n      },\n    }),\n    [currentUser]\n  );\n  const [form, setForm] = useState(defaultFormState);\n  const [formValid, setFormValid] = useState(true);\n\n  const handleInput = (value, name, valid) => {\n    setForm({\n      ...form,\n      [name]: { value, valid },\n    });\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onUpdateUser({\n      name: form.name.value,\n      about: form.about.value,\n    });\n  };\n\n  useEffect(() => {\n    if (form.name.valid && form.about.valid) {\n      setFormValid(true);\n    } else {\n      setFormValid(false);\n    }\n  }, [form]);\n\n  useEffect(() => {\n    setForm(defaultFormState);\n  }, [currentUser, open, setForm, defaultFormState]);\n\n  return (\n    <PopupWithForm\n      title=\"Редактировать профиль\"\n      name=\"edit-profile\"\n      isOpen={open}\n      disabled={!formValid}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <FormInput\n        type=\"text\"\n        name=\"name\"\n        id=\"name-input\"\n        className=\"form__input form__input_type_name form__input_style_light\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={form.name.value}\n        onChange={handleInput}\n      />\n      <FormInput\n        type=\"text\"\n        name=\"about\"\n        id=\"about-input\"\n        className=\"form__input form__input_type_about form__input_style_light\"\n        required\n        minLength=\"2\"\n        maxLength=\"200\"\n        value={form.about.value}\n        onChange={handleInput}\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React, { useEffect, useState } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport FormInput from './FormInput';\nimport { func, bool } from 'prop-types';\n\nAddPlacePopup.propTypes = {\n  onClose: func.isRequired,\n  onAddPlace: func.isRequired,\n  open: bool,\n  submitting: bool,\n};\n\nfunction AddPlacePopup({\n  onClose,\n  onAddPlace,\n  submitting = false,\n  open = false,\n}) {\n  const defaultFormState = {\n    name: {\n      value: '',\n      valid: false,\n    },\n    link: {\n      value: '',\n      valid: false,\n    },\n  };\n  const [form, setForm] = useState(defaultFormState);\n  const [formValid, setFormValid] = useState(false);\n\n  const handleClose = () => {\n    setForm(defaultFormState);\n    onClose();\n  };\n\n  const handleInput = (value, name, valid) => {\n    setForm({\n      ...form,\n      [name]: { value, valid },\n    });\n  };\n\n  const clearForm = () => {\n    setForm(defaultFormState);\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    const { name, link } = form;\n    onAddPlace({ name: name.value, link: link.value }, clearForm);\n  };\n\n  useEffect(() => {\n    if (form.name.valid && form.link.valid) {\n      setFormValid(true);\n    } else {\n      setFormValid(false);\n    }\n  }, [form]);\n\n  return (\n    <PopupWithForm\n      title=\"Новое место\"\n      name=\"add-card\"\n      isOpen={open}\n      disabled={!formValid}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <FormInput\n        value={form.name.value}\n        onChange={handleInput}\n        type=\"text\"\n        name=\"name\"\n        id=\"place-input\"\n        placeholder=\"Название\"\n        className=\"form__input form__input_style_light form__input_type_card-name\"\n        required\n        minLength=\"2\"\n        maxLength=\"30\"\n      />\n      <FormInput\n        value={form.link.value}\n        onChange={handleInput}\n        type=\"url\"\n        name=\"link\"\n        id=\"link-input\"\n        placeholder=\"Ссылка на картинку\"\n        className=\"form__input form__input_style_light form__input_type_link\"\n        required\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { string, func, bool } from 'prop-types';\n\nConfirmDeleteCardPopup.propTypes = {\n  cardId: string,\n  onClose: func.isRequired,\n  onDeleteCard: func.isRequired,\n  submitting: bool,\n};\n\nfunction ConfirmDeleteCardPopup({\n  cardId,\n  onClose,\n  onDeleteCard,\n  submitting = false,\n}) {\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onDeleteCard(cardId);\n  };\n\n  return (\n    <PopupWithForm\n      title=\"Вы уверены?\"\n      buttonText=\"Да\"\n      name=\"delete\"\n      isOpen={!!cardId}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <input\n        type=\"hidden\"\n        className=\"form__input form__input_type_id\"\n        name=\"id\"\n      />\n    </PopupWithForm>\n  );\n}\n\nexport default ConfirmDeleteCardPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { func, bool } from 'prop-types';\n\nEditAvatarPopup.propTypes = {\n  onClose: func.isRequired,\n  onUpdateAvatar: func.isRequired,\n  open: bool,\n  submitting: bool,\n};\n\nfunction EditAvatarPopup({\n  onClose,\n  onUpdateAvatar,\n  open = false,\n  submitting = false,\n}) {\n  const ref = React.useRef();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onUpdateAvatar({\n      avatar: ref.current.value,\n    });\n  };\n\n  return (\n    <PopupWithForm\n      title=\"Обновить аватар\"\n      name=\"update-profile\"\n      isOpen={open}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      submitting={submitting}\n    >\n      <label className=\"form__field\">\n        <input\n          ref={ref}\n          type=\"url\"\n          name=\"avatar\"\n          id=\"avatar-input\"\n          className=\"form__input form__input_type_link form__input_style_light\"\n          required\n        />\n        <span className=\"form__input-error avatar-input-error\" />\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { api } from '../utils/api';\nimport { logError } from '../utils/utils';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeleteCardPopup from './ConfirmDeleteCardPopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport './styles/main.css';\n\nfunction MainContainer() {\n  const [loading, setLoading] = useState(true);\n  const [formSubmitting, setFormSubmitting] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [cards, setCards] = useState([]);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [deletingCardId, setDeletingCardId] = useState(null);\n  const { currentUser, setCurrentUser } = useContext(CurrentUserContext);\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleDeleteCardClick = (id) => {\n    setDeletingCardId(id);\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  };\n\n  const handleUpdateUser = (userData) => {\n    setFormSubmitting(true);\n    api\n      .updateProfile(userData)\n      .then((newUserData) => {\n        setCurrentUser({\n          ...currentUser,\n          ...newUserData,\n        });\n        setIsEditProfilePopupOpen(false);\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleUpdateAvatar = (formData) => {\n    setFormSubmitting(true);\n    api\n      .updateAvatar(formData)\n      .then((newUserData) => {\n        setCurrentUser({\n          ...currentUser,\n          ...newUserData,\n        });\n        setIsEditAvatarPopupOpen(false);\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleAddPlaceSubmit = (cardData, clearCallback) => {\n    setFormSubmitting(true);\n    api\n      .postCard(cardData)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        setIsAddPlacePopupOpen(false);\n        clearCallback();\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleDeleteCardSubmit = (id) => {\n    setFormSubmitting(true);\n    api\n      .delete(id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== id));\n        setDeletingCardId(null);\n      })\n      .catch(logError)\n      .finally(() => setFormSubmitting(false));\n  };\n\n  const handleCardLike = (card, setLikeFetching) => {\n    const isLiked = card.likes.some((user) => user._id === currentUser._id);\n\n    setLikeFetching(true);\n    api\n      .like(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch(logError)\n      .finally(() => setLikeFetching(false));\n  };\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setDeletingCardId(null);\n    setSelectedCard(null);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    console.log(currentUser);\n\n    Promise.all([api.getUserInfo(), api.getCardList()])\n      .then(([userData, cardList]) => {\n        setCurrentUser({\n          ...currentUser,\n          ...userData,\n        });\n        setCards(cardList);\n      })\n      .catch(logError)\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  return (\n    <>\n      <Main\n        cards={cards}\n        onCardLike={handleCardLike}\n        onCardDelete={handleDeleteCardClick}\n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddPlaceClick}\n        onEditAvatar={handleEditAvatarClick}\n        onCardClick={handleCardClick}\n        loading={loading}\n      />\n      <Footer />\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n      <EditProfilePopup\n        open={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n        submitting={formSubmitting}\n      />\n      <AddPlacePopup\n        open={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n        submitting={formSubmitting}\n      />\n      <ConfirmDeleteCardPopup\n        cardId={deletingCardId}\n        onClose={closeAllPopups}\n        onDeleteCard={handleDeleteCardSubmit}\n        submitting={formSubmitting}\n      />\n      <EditAvatarPopup\n        open={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n        submitting={formSubmitting}\n      />\n    </>\n  );\n}\n\nexport default MainContainer;\n","import React, { useState } from 'react';\nimport FormInput from './FormInput';\nimport { Link } from 'react-router-dom';\nimport './styles/auth.css';\nimport { bool, func } from 'prop-types';\nimport Loader from './Loader';\n\nRegister.propTypes = {\n  onSubmit: func,\n  fetching: bool,\n};\n\nfunction Register({ onSubmit, fetching }) {\n  const [form, setForm] = useState({\n    email: '',\n    password: '',\n  });\n\n  const handleInput = (value, name) => {\n    setForm({\n      ...form,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    onSubmit(form);\n  };\n\n  return (\n    <main className=\"content\">\n      <form\n        noValidate\n        name=\"sign-up\"\n        className=\"form form_type_auth\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"form__body\">\n          <h1 className=\"form__title\">Регистрация</h1>\n          <FormInput\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            id=\"username-input\"\n            className=\"form__input form__input_type_email form__input_style_dark\"\n            required\n            minLength=\"2\"\n            maxLength=\"40\"\n            onChange={handleInput}\n            value={form.email}\n          />\n          <FormInput\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Пароль\"\n            id=\"password-input\"\n            className=\"form__input form__input_type_password form__input_style_dark\"\n            required\n            minLength=\"6\"\n            maxLength=\"40\"\n            onChange={handleInput}\n            value={form.password}\n          />\n        </div>\n        <div className=\"form__actions\">\n          <button\n            type=\"submit\"\n            name=\"save\"\n            className=\"form__save form__save_style_dark\"\n          >\n            {fetching ? (\n              <Loader size={30} color=\"#000\" />\n            ) : (\n              'Зарегистрироваться'\n            )}\n          </button>\n          <div className=\"form__after-save\">\n            Уже зарегистрированы?{' '}\n            <Link to=\"/sign-in\" className=\"link form__link\">\n              Войти\n            </Link>\n          </div>\n        </div>\n      </form>\n    </main>\n  );\n}\n\nexport default Register;\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { func, bool, string } from 'prop-types';\n\nProtectedRoute.propTypes = {\n  component: func,\n  isloggedIn: bool,\n  path: string,\n};\n\nfunction ProtectedRoute({ component: Component, isloggedIn, path, ...props }) {\n  return (\n    <Route path={path}>\n      {!isloggedIn ? <Redirect to=\"/sign-in\" /> : <Component {...props} />}\n    </Route>\n  );\n}\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/success-icon.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail-icon.7c6a020b.svg\";","import React from 'react';\nimport { bool, func, string } from 'prop-types';\nimport successIcon from '../assets/icons/success-icon.svg';\nimport failIcon from '../assets/icons/fail-icon.svg';\n\nPopupRegisterInfo.propTypes = {\n  open: bool,\n  onClose: func,\n  success: bool,\n  title: string,\n};\n\nfunction PopupRegisterInfo({ open, onClose, success, title }) {\n  return (\n    <div className={`popup ${open ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"popup__close btn btn_type_close\"\n          onClick={onClose}\n        />\n        <div\n          className=\"popup__icon\"\n          aria-label={success ? 'Успешная регистрация' : 'Ошибка регистрации'}\n          style={{\n            backgroundImage: `url(${success ? successIcon : failIcon})`,\n          }}\n        />\n        <h2 className=\"popup__title popup__title_place_register\">{title}</h2>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupRegisterInfo;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Header from './Header';\nimport Login from './Login';\nimport MainContainer from './MainContainer';\nimport Register from './Register';\nimport ProtectedRoute from '../hoc/ProtectedRoute';\nimport Loader from './Loader';\nimport PopupRegisterInfo from './PopupRegisterInfo';\nimport { auth } from '../utils/api';\nimport { logError } from '../utils/utils';\n\nfunction App() {\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = useState(\n    useContext(CurrentUserContext)\n  );\n  const [showRegisterInfo, setShowRegisterInfo] = useState(false);\n  const [fetching, setFetching] = useState(false);\n  const [authStatus, setAuthStatus] = useState({ status: false, message: '' });\n  const [isLoggedIn, setIsloggedIn] = useState(false);\n  const [appReady, setAppReady] = useState(false);\n\n  const handleRegisterSubmit = ({ email, password }) => {\n    setFetching(true);\n    auth\n      .register(email, password)\n      .then(({ data, error }) => {\n        if (error) {\n          return Promise.reject(error);\n        }\n\n        setCurrentUser({ ...currentUser, email: data.email, _id: data._id });\n        return auth.auth(email, password);\n      })\n      .then(({ token, error }) => {\n        if (error) {\n          return Promise.reject(error);\n        }\n\n        localStorage.setItem('jwt', token);\n        setIsloggedIn(true);\n        history.push('/');\n        setAuthStatus({\n          status: true,\n          message: 'Вы успешно зарегистрировались!',\n        });\n      })\n      .catch((error) => {\n        setAuthStatus({\n          status: false,\n          message:\n            error.toString() || 'Что-то пошло не так! Попробуйте ещё раз.',\n        });\n        logError(error);\n      })\n      .finally(() => {\n        setShowRegisterInfo(true);\n        setFetching(false);\n      });\n  };\n\n  const handleLoginSubmit = ({ email, password }) => {\n    setFetching(true);\n    auth\n      .auth(email, password)\n      .then(({ token, message }) => {\n        if (!token) {\n          return Promise.reject(message);\n        }\n\n        localStorage.setItem('jwt', token);\n        return auth.checkToken(token);\n      })\n      .then(changeAuthStatus)\n      .catch((error) => {\n        setAuthStatus({\n          status: false,\n          message:\n            error.toString() || 'Что-то пошло не так! Попробуйте ещё раз.',\n        });\n        setShowRegisterInfo(true);\n        logError(error);\n      })\n      .finally(() => {\n        setFetching(false);\n      });\n  };\n\n  const handleClosePopup = () => {\n    setShowRegisterInfo(false);\n  };\n\n  const changeAuthStatus = ({ data }) => {\n    const { email } = data;\n    setCurrentUser({ ...currentUser, email });\n    setIsloggedIn(true);\n    history.push('/');\n  };\n\n  useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt) {\n      auth\n        .checkToken(jwt)\n        .then(changeAuthStatus)\n        .catch(logError)\n        .finally(() => setAppReady(true));\n    } else {\n      setAppReady(true);\n    }\n  }, []);\n\n  if (!appReady) {\n    return (\n      <div className=\"page page_loading\">\n        <Loader size={150} count={20} />\n      </div>\n    );\n  }\n\n  return (\n    <CurrentUserContext.Provider\n      value={{ currentUser, setCurrentUser, isLoggedIn, setIsloggedIn }}\n    >\n      <div className=\"page\">\n        <Header />\n        <Switch>\n          <Route path=\"/sign-in\">\n            <Login onSubmit={handleLoginSubmit} fetching={fetching} />\n          </Route>\n          <Route path=\"/sign-up\">\n            <Register onSubmit={handleRegisterSubmit} fetching={fetching} />\n          </Route>\n          <ProtectedRoute\n            path=\"/\"\n            component={MainContainer}\n            isloggedIn={isLoggedIn}\n          />\n        </Switch>\n        <PopupRegisterInfo\n          open={showRegisterInfo}\n          title={authStatus.message}\n          success={authStatus.status}\n          onClose={handleClosePopup}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}